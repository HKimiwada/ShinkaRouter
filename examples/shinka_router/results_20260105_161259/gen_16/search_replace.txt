<NAME>
enhanced_routing_logic
</NAME>

<DESCRIPTION>
The current routing logic primarily uses `deep_think` for medium and hard problems, which can lead to excessive LLM calls. By integrating `ensemble_vote` for medium-difficulty problems, we can achieve a balance between accuracy and efficiency. This approach allows us to gather diverse solutions and select the most common answer, potentially improving accuracy while reducing reliance on repeated calls to `deep_think`. Additionally, we will use `verify` only if the ensemble approach does not yield a clear answer, thereby minimizing unnecessary calls.
</DESCRIPTION>

<DIFF>
<<<<<<< SEARCH
            response, cost = self.deep_think(problem)
            answer = self.extract_boxed_answer(response)
            if answer:
                verify_response, verify_cost = self.verify(problem, answer)
                response = verify_response
                cost += verify_cost
=======
            # Use ensemble_vote for medium-difficulty problems
            response, cost = self.ensemble_vote(problem, n=3)
            answer = self.extract_boxed_answer(response)
            if not answer:
                # If no clear answer, fallback to deep_think and verify
                response, cost = self.deep_think(problem)
                answer = self.extract_boxed_answer(response)
                if answer:
                    verify_response, verify_cost = self.verify(problem, answer)
                    response = verify_response
                    cost += verify_cost
>>>>>>> REPLACE
</DIFF>