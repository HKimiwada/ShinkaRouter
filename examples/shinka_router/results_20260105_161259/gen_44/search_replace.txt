<NAME>
enhanced_routing_logic
</NAME>

<DESCRIPTION>
The current routing logic primarily relies on the `baseline_solve` method, which limits the agent's ability to tackle more complex problems effectively. To improve performance, I propose a multi-stage routing strategy that incorporates both `estimate_difficulty` and `classify_problem_type` to better tailor the approach based on the problem's characteristics. This will allow the agent to select more appropriate solving methods, such as `deep_think` for hard problems and `ensemble_vote` for medium ones, rather than defaulting to the baseline. This change aims to enhance accuracy while managing the number of LLM calls.
</DESCRIPTION>

<DIFF>
<<<<<<< SEARCH
        # Baseline: Exact match to adas_aime (temp=0.0, simple prompt)
        response, cost = self.baseline_solve(problem)
=======
        # Reset tracking for this problem
        self.reset_tracking()

        # Estimate difficulty and classify problem type
        difficulty, cost = self.estimate_difficulty(problem)
        problem_type, type_cost = self.classify_problem_type(problem)
        total_cost = cost + type_cost

        # Routing based on difficulty and type
        if difficulty == 'easy':
            response, cost = self.baseline_solve(problem)
            total_cost += cost
        elif difficulty == 'medium':
            response, cost = self.ensemble_vote(problem, self.ensemble_size)
            total_cost += cost
        else:  # hard problems
            response, cost = self.deep_think(problem)
            total_cost += cost
            answer = self.extract_boxed_answer(response)
            if answer:
                verify_response, verify_cost = self.verify(problem, answer)
                response = verify_response
                total_cost += verify_cost
>>>>>>> REPLACE
        return response, cost
</DIFF>