```python
<NAME>
enhanced_routing_logic
</NAME>

<DESCRIPTION>
The current routing logic primarily uses deep_think for medium and hard problems, which can lead to excessive LLM calls. By incorporating an ensemble_vote for medium problems and a self_critique step after deep_think for hard problems, we can improve the accuracy and reduce the number of calls. This change aims to enhance the overall efficiency and accuracy of the agent.
</DESCRIPTION>

<DIFF>
<<<<<<< SEARCH
        elif difficulty in ['medium', 'hard']:
            response, cost = self.deep_think(problem)
            total_cost += cost

            # Verify the answer
            answer = self.extract_boxed_answer(response)
            if answer:
                verify_response, verify_cost = self.verify(problem, answer)
                total_cost += verify_cost
                return verify_response, total_cost
=======
        elif difficulty == 'medium':
            response, cost = self.ensemble_vote(problem, n=3)
            total_cost += cost
        else:  # hard
            response, cost = self.deep_think(problem)
            total_cost += cost

            # Verify the answer
            answer = self.extract_boxed_answer(response)
            if answer:
                verify_response, verify_cost = self.verify(problem, answer)
                total_cost += verify_cost

            # Self-critique for further improvement
            critique_response, critique_cost = self.self_critique(problem, response)
            total_cost += critique_cost
            response = critique_response
>>>>>>> REPLACE
```