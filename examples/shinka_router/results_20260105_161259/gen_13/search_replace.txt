<NAME>
difficulty_based_routing
</NAME>

<DESCRIPTION>
To improve the overall accuracy of the agent, I propose to implement a difficulty-based routing strategy. By first estimating the difficulty of the problem using the `estimate_difficulty` primitive, we can choose a more appropriate solving method based on the problem's complexity. For easy problems, we will use `baseline_solve`, whereas for harder problems, we can combine `deep_think` with `verify` to enhance accuracy. This approach is expected to reduce errors, particularly in complex scenarios while optimizing the number of LLM calls.
</DESCRIPTION>

<DIFF>
<<<<<<< SEARCH
        # Baseline: Exact match to adas_aime (temp=0.0, simple prompt)
        response, cost = self.baseline_solve(problem)
=======
        # Estimate the difficulty of the problem
        difficulty, difficulty_cost = self.estimate_difficulty(problem)
        total_cost += difficulty_cost

        if difficulty == 'easy':
            response, cost = self.baseline_solve(problem)
            total_cost += cost
        else:
            # For medium or hard problems, use deep_think followed by verify
            response, cost = self.deep_think(problem)
            total_cost += cost

            # Verify the answer
            answer = self.extract_boxed_answer(response)
            if answer:
                verify_response, verify_cost = self.verify(problem, answer)
                total_cost += verify_cost
                return verify_response, total_cost

            return response, total_cost
>>>>>>> REPLACE
</DIFF>